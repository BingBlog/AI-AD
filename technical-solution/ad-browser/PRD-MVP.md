# Ad Browser MVP 产品需求文档（PRD）

## 文档信息

- **版本**: v1.0
- **创建日期**: 2025-01-XX
- **产品定位**: 面向广告营销行业的「研究型智能平台」MVP 版本
- **目标用户**: 广告公司策划/创意/策略、品牌市场部、内容营销顾问

---

## 一、产品概述

### 1.1 产品定位

**核心定位**: 研究型智能平台（非内容平台）

- ✅ **做**: 研究、抽象、总结
- ❌ **不做**: 原文分发、原视频存储、替代原平台阅读

### 1.2 MVP 核心价值

帮助广告营销策划师：

1. **高效研究**公开营销案例（小红书/抖音等平台）
2. **结构化提取**营销要素和洞察
3. **沉淀知识**到个人/团队知识库

### 1.3 MVP 范围

**包含功能**:

- ✅ 浏览器插件（入口与 UI）
- ✅ 本地 Agent（Browser Use）
- ✅ 云端 LLM Proxy
- ✅ 基础知识库（案例摘要与洞察）
- ✅ 案例搜索与浏览

**不包含功能**:

- ❌ 知识标签体系
- ❌ 用户贡献机制
- ❌ 智能洞察生成
- ❌ 企业版/团队版
- ❌ Web 应用（仅浏览器插件）
- ❌ 云端同步（仅本地存储）

---

## 二、用户角色与场景

### 2.1 典型用户画像

**主要用户**: 广告公司策划师 - 张策划

**背景**:

- 工作 3 年，负责汽车品牌营销方案
- 需要快速找到类似案例参考
- 经常在小红书、抖音搜索营销案例

**核心痛点**:

- 搜索效率低，需要手动翻页筛选
- 案例信息碎片化，难以系统整理
- 看过就忘，无法形成知识沉淀

### 2.2 MVP 核心使用场景

#### 场景 1: 搜索并研究案例

**用户目标**: 找到"春节汽车营销"相关案例

**流程**:

1. 用户打开浏览器插件
2. 输入关键词："春节 汽车营销 小红书"
3. Agent 自动搜索并筛选相关案例
4. 用户查看案例摘要列表
5. 选择有价值的案例加入知识库

**成功标准**: 10 分钟内找到 5-10 个相关案例

#### 场景 2: 提取案例洞察

**用户目标**: 从案例中提取可复用的营销方法论

**流程**:

1. 用户选择案例，点击"提取洞察"
2. Agent 分析案例，生成结构化摘要
3. 用户确认/编辑摘要内容
4. 保存到知识库

**成功标准**: 每个案例 30 秒内生成摘要

---

## 三、功能需求详述

### 3.1 浏览器插件（Browser Extension）

**UI 形态说明**:
MVP 阶段的 UI **完全基于浏览器插件**，不包含独立的 Web 应用。所有功能（搜索任务、执行进度、案例摘要、知识库浏览）都在插件弹窗中完成。

**为什么选择插件形态**:

- ✅ 用户在使用小红书/抖音时可直接调用，无需切换应用
- ✅ 与浏览器环境无缝集成，Agent 可直接操作当前浏览器
- ✅ 降低开发成本，MVP 阶段聚焦核心功能
- ✅ 符合"研究工具"的定位，轻量级入口

#### 3.1.1 插件入口与安装检测

**功能描述**:

- 插件作为用户入口，提供主要 UI 界面
- 首次使用时检测本地 Agent 是否安装

**UI 设计**:

```
┌─────────────────────────────────────┐
│  Ad Browser - 营销案例研究助手      │
├─────────────────────────────────────┤
│                                     │
│  [检测本地 Agent 状态]              │
│                                     │
│  ✅ Agent 已连接                    │
│  版本: v1.0.0                       │
│                                     │
│  或                                │
│                                     │
│  ⚠️  Agent 未安装                  │
│  [下载并安装 Agent]                 │
│                                     │
└─────────────────────────────────────┘
```

**交互流程**:

1. 插件启动时自动检测本地 Agent 连接状态
2. 如果未连接：
   - 显示"未安装"状态
   - 提供"下载 Agent"按钮
   - 点击后跳转到下载页面（macOS .dmg / Windows .exe）
3. 如果已连接：
   - 显示 Agent 版本信息
   - 显示连接状态（绿色圆点）

#### 3.1.2 主界面 - 搜索任务创建

**功能描述**:
用户创建研究任务，Agent 自动执行搜索和筛选

**UI 设计**:

```
┌─────────────────────────────────────┐
│  🎯 创建研究任务                     │
├─────────────────────────────────────┤
│                                     │
│  关键词:                            │
│  ┌───────────────────────────────┐ │
│  │ 春节 汽车营销                  │ │
│  └───────────────────────────────┘ │
│                                     │
│  平台选择:                          │
│  ☑ 小红书                           │
│  ☐ 抖音                             │
│  ☐ 微博                             │
│                                     │
│  搜索范围:                          │
│  ○ 前3页 (快速)                    │
│  ● 前10页 (标准)                   │
│  ○ 前20页 (深度)                   │
│                                     │
│  筛选条件:                          │
│  [行业: 汽车 ▼] [类型: 全部 ▼]     │
│                                     │
│  [开始研究] [取消]                  │
│                                     │
└─────────────────────────────────────┘
```

**字段说明**:

- **关键词**: 必填，支持多个关键词（空格分隔）
- **平台选择**: 多选，默认小红书
- **搜索范围**: 单选框，影响执行时间
- **筛选条件**: 可选，行业、活动类型等

**交互规则**:

- 关键词为空时，"开始研究"按钮禁用
- 点击"开始研究"后，显示执行进度界面
- 用户可随时中断任务

#### 3.1.3 执行进度界面

**功能描述**:
实时显示 Agent 执行进度，用户可在关键节点确认

**UI 设计**:

```
┌─────────────────────────────────────┐
│  🔍 正在研究...                     │
├─────────────────────────────────────┤
│                                     │
│  进度: ████████░░ 80%              │
│                                     │
│  当前步骤: 筛选案例相关性            │
│                                     │
│  ┌───────────────────────────────┐ │
│  │ 📄 案例 #8                     │ │
│  │ 标题: 比亚迪春节营销...         │ │
│  │ 来源: 小红书                    │ │
│  │                                │ │
│  │ 是否相关？                      │ │
│  │ [✅ 相关] [❌ 不相关] [跳过]    │ │
│  └───────────────────────────────┘ │
│                                     │
│  已找到: 7 个相关案例               │
│  预计剩余: 2 分钟                   │
│                                     │
│  [暂停] [停止任务]                  │
│                                     │
└─────────────────────────────────────┘
```

**状态显示**:

- **进度条**: 显示整体进度百分比
- **当前步骤**: 显示 Agent 正在执行的操作
- **案例卡片**: 需要用户确认的案例信息
- **统计信息**: 已找到案例数、预计剩余时间

**交互规则**:

- 用户必须对每个案例做出选择（相关/不相关/跳过）
- 选择后自动继续下一个案例
- 用户可随时暂停或停止任务
- 暂停后可从断点继续

#### 3.1.4 案例摘要列表

**功能描述**:
展示 Agent 提取的案例摘要，用户可查看、编辑、保存

**UI 设计**:

```
┌─────────────────────────────────────┐
│  📚 研究结果 (10个案例)             │
├─────────────────────────────────────┤
│                                     │
│  [全选] [批量保存] [导出]           │
│                                     │
│  ┌───────────────────────────────┐ │
│  │ ☑ 案例 #1                     │ │
│  │ ┌───────────────────────────┐ │ │
│  │ │ [案例主图]                 │ │ │
│  │ └───────────────────────────┘ │ │
│  │                                │ │
│  │ 标题: 比亚迪春节营销...         │ │
│  │ 平台: 小红书                    │ │
│  │ 来源: [查看原文]               │ │
│  │                                │ │
│  │ 📝 摘要:                       │ │
│  │ 品牌通过情感叙事绑定节日情绪，  │ │
│  │ 使用KOL联动扩大传播...         │ │
│  │                                │ │
│  │ 🎯 洞察:                        │ │
│  │ • 节日情绪绑定品牌价值          │ │
│  │ • 用户故事降低广告感            │ │
│  │                                │ │
│  │ 标签: #汽车 #春节 #情感营销    │ │
│  │                                │ │
│  │ [编辑] [保存] [删除]            │ │
│  └───────────────────────────────┘ │
│                                     │
│  ┌───────────────────────────────┐ │
│  │ ☐ 案例 #2                     │ │
│  │ ...                            │ │
│  └───────────────────────────────┘ │
│                                     │
│  [加载更多]                         │
│                                     │
└─────────────────────────────────────┘
```

**卡片内容**:

- **主图**: 案例主图（如果有）
- **标题**: 案例标题
- **平台/来源**: 显示平台和原文链接
- **摘要**: Agent 生成的案例摘要（可编辑）
- **洞察**: 可复用的营销洞察（可编辑）
- **标签**: 自动生成的标签（可编辑）

**交互规则**:

- 支持单选/全选案例
- 点击"编辑"可修改摘要和洞察
- 点击"保存"保存到知识库
- 点击"查看原文"在新标签页打开原始链接
- 支持批量保存和导出（JSON 格式）

#### 3.1.5 知识库浏览

**功能描述**:
浏览已保存的案例知识库

**UI 设计**:

```
┌─────────────────────────────────────┐
│  📖 我的知识库                      │
├─────────────────────────────────────┤
│                                     │
│  [搜索] [筛选] [排序]               │
│                                     │
│  筛选: [平台: 全部 ▼] [行业: 全部 ▼]│
│                                     │
│  ┌──────────┐ ┌──────────┐        │
│  │ 案例卡片1│ │ 案例卡片2│        │
│  └──────────┘ └──────────┘        │
│  ┌──────────┐ ┌──────────┐        │
│  │ 案例卡片3│ │ 案例卡片4│        │
│  └──────────┘ └──────────┘        │
│                                     │
│  共 24 个案例                       │
│                                     │
└─────────────────────────────────────┘
```

**功能**:

- 搜索: 关键词搜索已保存案例
- 筛选: 按平台、行业、标签筛选
- 排序: 按时间、相关性排序
- 卡片展示: 与案例摘要列表相同的卡片样式

### 3.2 本地 Agent

#### 3.2.1 Agent 核心能力

**功能描述**:
本地运行的智能 Agent，自动操作浏览器进行案例搜索和提取

**核心能力**:

1. **搜索能力**:

   - 在小红书/抖音等平台搜索关键词
   - 自动翻页浏览搜索结果
   - 识别搜索结果列表

2. **筛选能力**:

   - 判断案例是否与主题相关
   - 决定是否进入详情页
   - 提取基础信息（标题、图片、链接）

3. **提取能力**:
   - 提取案例页面主要内容
   - 识别营销要素（品牌、行业、活动类型等）
   - 生成结构化摘要

**行为约束**:

- 不登录账号
- 不点赞、评论、收藏
- 只进行浏览和提取操作
- 使用用户自己的浏览器环境（Cookie、账号状态）

#### 3.2.2 Agent 执行流程

```
开始任务
  ↓
连接浏览器
  ↓
打开目标平台
  ↓
搜索关键词
  ↓
遍历搜索结果页
  ↓
对每个结果:
  ├─ 判断相关性 → [用户确认]
  ├─ 进入详情页
  ├─ 提取内容
  └─ 生成摘要 → [用户确认]
  ↓
保存到临时存储
  ↓
返回结果列表
```

**关键节点**:

- 相关性判断: 需要用户确认
- 摘要生成: 用户可编辑
- 保存到知识库: 用户选择

### 3.3 云端 LLM 服务

#### 3.3.1 功能描述

**核心功能**:

- 提供统一的 AI 能力调用接口
- 管理 API Key 和访问权限
- 控制使用成本和频率

**访问控制**:

- 用户登录后获取访问凭证
- 凭证有时效性，可撤销
- 支持功能限制（如：仅搜索功能）

#### 3.3.2 成本控制

**使用限制**:

- 单用户每日使用限额
- 单次请求最大限制
- 超出限额后提示用户升级或使用自带 Key（BYOK）

**使用监控**:

- 实时使用统计
- 每日使用报表
- 异常使用告警

### 3.4 基础知识库

#### 3.4.1 数据内容

**案例摘要包含的信息**:

- **基础信息**: 案例标题、平台、原文链接、主图
- **营销要素**: 品牌名称、行业、活动类型
- **摘要与洞察**: 案例摘要（不可还原原文）、可复用洞察（3-5 条）、标签
- **元数据**: 创建时间、更新时间、用户 ID

**关键原则**:

- ❌ 不存储原文全文
- ❌ 不存储原视频
- ✅ 只存储抽象后的摘要和洞察
- ✅ 存储原文链接（跳转用）

#### 3.4.2 存储方式

- 数据存储在用户本地设备
- 案例主图保存在本地
- 不支持云端同步和多设备同步

---

## 四、UI/UX 详细设计

### 4.1 设计原则

1. **简洁高效**: 减少操作步骤，提高效率
2. **清晰反馈**: 实时显示执行状态和进度
3. **可控性**: 用户始终掌控流程，可随时中断
4. **一致性**: 与现有前端设计风格保持一致

### 4.2 视觉设计

#### 4.2.1 色彩系统

```
主色: #1890ff (Ant Design 默认蓝)
成功: #52c41a
警告: #faad14
错误: #ff4d4f
文字: #262626
次要文字: #8c8c8c
背景: #ffffff
分割线: #f0f0f0
```

#### 4.2.2 组件库

使用统一的 UI 组件库，包含常用组件：

- 按钮、输入框、选择器、卡片
- 进度条、加载动画、对话框
- 标签、文本、间距组件

#### 4.2.3 布局规范

**插件弹窗尺寸**:

- 宽度: 480px
- 高度: 600px（可调整，最大 800px）

**间距规范**:

- 小间距: 8px
- 中间距: 16px
- 大间距: 24px

**圆角规范**:

- 卡片: 6px
- 按钮: 4px
- 输入框: 4px

### 4.3 交互细节

#### 4.3.1 加载状态

**Agent 连接中**:

```
┌─────────────────────┐
│  🔄 正在连接 Agent...│
│     [旋转动画]       │
└─────────────────────┘
```

**搜索执行中**:

```
┌─────────────────────┐
│  🔍 正在搜索...      │
│  ████████░░ 80%     │
│  预计剩余: 2分钟     │
└─────────────────────┘
```

#### 4.3.2 错误处理

**Agent 未连接**:

- 显示错误提示
- 提供"重新连接"按钮
- 提供"下载 Agent"链接

**搜索失败**:

- 显示错误原因
- 提供"重试"按钮
- 支持手动输入案例信息

**网络错误**:

- 显示网络错误提示
- 自动重试（最多 3 次）
- 提供离线模式（仅本地功能）

#### 4.3.3 确认对话框

**案例相关性确认**:

```
┌─────────────────────────────┐
│  案例相关性确认              │
├─────────────────────────────┤
│                             │
│  标题: 比亚迪春节营销...     │
│  来源: 小红书               │
│                             │
│  这个案例与你的研究主题      │
│  "春节 汽车营销"相关吗？     │
│                             │
│  [✅ 相关] [❌ 不相关] [跳过]│
│                             │
└─────────────────────────────┘
```

**保存确认**:

```
┌─────────────────────────────┐
│  保存到知识库                │
├─────────────────────────────┤
│                             │
│  将保存 5 个案例到知识库     │
│                             │
│  [确认] [取消]               │
│                             │
└─────────────────────────────┘
```

### 4.4 响应式设计

**插件弹窗**:

- 固定宽度: 480px
- 高度自适应（最小 400px，最大 800px）
- 内容区域可滚动

---

## 五、系统架构概述

### 5.1 整体架构

```
┌─────────────────┐
│  浏览器插件      │
│  (用户界面)      │
└────────┬─────────┘
         │
         │ 通信连接
         │
┌────────▼─────────┐
│  本地 Agent      │
│  (智能执行)      │
└────────┬─────────┘
         │
         │ API 调用
         │
┌────────▼─────────┐
│  云端 AI 服务    │
│  (摘要生成)      │
└──────────────────┘
```

### 5.2 数据流程

**搜索任务流程**:

用户输入 → 插件界面 → Agent 执行 → 平台网站搜索 → 提取内容 → AI 生成摘要 → 返回插件 → 用户确认 → 保存知识库

**知识库查询流程**:

用户搜索 → 插件界面 → 本地知识库查询 → 返回结果

---

## 六、用户故事（User Stories）

### Story 1: 创建研究任务

**作为** 广告策划师  
**我想要** 快速创建研究任务  
**以便于** 让 Agent 自动帮我搜索案例

**验收标准**:

- [ ] 可以输入关键词和选择平台
- [ ] 可以设置搜索范围
- [ ] 点击"开始研究"后立即开始执行
- [ ] 如果 Agent 未连接，提示安装

### Story 2: 查看执行进度

**作为** 广告策划师  
**我想要** 实时查看 Agent 执行进度  
**以便于** 了解任务状态和预计完成时间

**验收标准**:

- [ ] 显示进度条和百分比
- [ ] 显示当前执行步骤
- [ ] 显示已找到案例数量
- [ ] 显示预计剩余时间

### Story 3: 确认案例相关性

**作为** 广告策划师  
**我想要** 在关键节点确认案例是否相关  
**以便于** 控制研究质量

**验收标准**:

- [ ] Agent 在筛选时暂停等待确认
- [ ] 显示案例基本信息（标题、图片、来源）
- [ ] 可以快速选择"相关/不相关/跳过"
- [ ] 选择后自动继续执行

### Story 4: 查看案例摘要

**作为** 广告策划师  
**我想要** 查看 Agent 生成的案例摘要  
**以便于** 快速了解案例核心信息

**验收标准**:

- [ ] 显示案例标题、平台、来源链接
- [ ] 显示结构化摘要（品牌、行业、活动类型等）
- [ ] 显示可复用洞察（3-5 条）
- [ ] 显示自动生成的标签

### Story 5: 编辑案例摘要

**作为** 广告策划师  
**我想要** 编辑 Agent 生成的摘要  
**以便于** 补充或修正信息

**验收标准**:

- [ ] 可以编辑摘要文本
- [ ] 可以编辑洞察列表
- [ ] 可以添加/删除标签
- [ ] 保存后更新到知识库

### Story 6: 保存到知识库

**作为** 广告策划师  
**我想要** 将案例保存到知识库  
**以便于** 后续查找和复用

**验收标准**:

- [ ] 可以单选或批量选择案例
- [ ] 点击"保存"后保存到本地数据库
- [ ] 保存成功后显示提示
- [ ] 可以在知识库中查看已保存案例

### Story 7: 浏览知识库

**作为** 广告策划师  
**我想要** 浏览已保存的案例知识库  
**以便于** 查找历史研究案例

**验收标准**:

- [ ] 以卡片形式展示案例
- [ ] 支持关键词搜索
- [ ] 支持按平台、行业筛选
- [ ] 支持按时间、相关性排序

### Story 8: 查看原文链接

**作为** 广告策划师  
**我想要** 点击链接查看原文  
**以便于** 深入了解案例详情

**验收标准**:

- [ ] 每个案例都有"查看原文"链接
- [ ] 点击后在新标签页打开
- [ ] 链接正确跳转到原始平台

---

## 七、非功能需求

### 7.1 性能要求

- **Agent 响应时间**: < 3 秒（连接检测）
- **搜索执行速度**: 单案例 20-40 秒
- **摘要生成时间**: < 10 秒
- **插件启动时间**: < 1 秒

### 7.2 可靠性要求

- **Agent 连接稳定性**: 99% 在线率
- **搜索成功率**: > 90%（排除平台限制）
- **数据保存成功率**: 100%

### 7.3 安全性要求

- **API Key 安全**: 仅存储在云端，本地不存储
- **用户数据加密**: 本地数据库加密存储
- **Token 有效期**: 30 分钟，可撤销

### 7.4 兼容性要求

- **浏览器**: Chrome 90+, Edge 90+
- **操作系统**: macOS 10.15+, Windows 10+
- **Agent 版本**: 向后兼容（至少 2 个版本）

### 7.5 可访问性要求

- **键盘导航**: 支持 Tab 键导航
- **屏幕阅读器**: 关键信息可读
- **色彩对比度**: 符合 WCAG AA 标准

---

## 八、MVP 开发计划

### 8.1 开发阶段

#### Phase 1: 基础架构（2 周）

**目标**: 搭建基础架构和通信机制

**交付物**:

- 插件可以检测 Agent 连接状态
- Agent 可以接收插件消息并响应

#### Phase 2: 核心功能（3 周）

**目标**: 实现搜索和提取核心功能

**交付物**:

- Agent 可以自动搜索并提取案例
- 可以生成结构化摘要

#### Phase 3: UI/UX 开发（2 周）

**目标**: 完成插件界面和交互

**交付物**:

- 完整的插件 UI
- 流畅的用户交互

#### Phase 4: 知识库功能（1 周）

**目标**: 实现本地知识库存储和查询

**交付物**:

- 本地知识库功能完整

#### Phase 5: 测试与优化（1 周）

**目标**: 测试和优化 MVP

**交付物**:

- MVP 版本可发布

### 8.2 里程碑

| 里程碑           | 时间   | 交付物              |
| ---------------- | ------ | ------------------- |
| M1: 架构完成     | Week 2 | 插件-Agent 通信正常 |
| M2: 核心功能完成 | Week 5 | 可以搜索并提取案例  |
| M3: UI 完成      | Week 7 | 插件界面完整        |
| M4: MVP 完成     | Week 9 | 可发布版本          |

---

## 九、风险评估与应对

### 9.1 技术风险

**风险 1: Browser Use 稳定性**

- **影响**: Agent 执行失败率高
- **应对**:
  - 增加重试机制
  - 提供手动输入备选方案
  - 监控失败率并优化 Prompt

**风险 2: 平台反爬虫**

- **影响**: 搜索被限制或封禁
- **应对**:
  - 使用用户自己的浏览器环境（Cookie）
  - 限制请求频率

**风险 3: LLM API 成本**

- **影响**: 成本超出预期
- **应对**:
  - 设置 Token 限额
  - 优化 Prompt 减少 Token 消耗
  - 支持 BYOK（用户自带 Key）

### 9.2 产品风险

**风险 1: 用户接受度低**

- **影响**: 用户不愿意安装本地 Agent
- **应对**:
  - 提供清晰的安装指引
  - 强调隐私和安全优势
  - 提供一键安装脚本

**风险 2: 执行速度慢**

- **影响**: 用户体验差
- **应对**:
  - 优化执行流程
  - 提供快速模式（前 3 页）
  - 支持后台执行

### 9.3 合规风险

**风险 1: 平台服务条款**

- **影响**: 违反平台规则
- **应对**:
  - 明确合规边界（仅研究、不批量采集）
  - 使用用户自己的账号和浏览器
  - 限制自动化程度

---

## 十、成功指标（Success Metrics）

### 10.1 MVP 阶段指标

**用户指标**:

- 插件安装率: > 50%（访问用户）
- Agent 安装率: > 80%（插件用户）
- 任务完成率: > 70%

**功能指标**:

- 搜索成功率: > 90%
- 摘要生成准确率: > 80%（用户满意度）
- 平均执行时间: < 5 分钟（10 个案例）

**留存指标**:

- 7 日留存率: > 40%
- 30 日留存率: > 20%

### 10.2 数据收集

**需要收集的数据**:

- 任务创建数量
- 任务完成数量
- 案例保存数量
- Agent 执行时间
- 错误类型和频率
- 用户操作路径

**隐私保护**:

- 不收集用户搜索内容
- 不收集用户个人信息
- 仅收集匿名使用统计

---

## 十一、附录

### 12.1 术语表

- **Agent**: 本地运行的智能代理程序
- **Browser Use**: 浏览器自动化技术
- **LLM Proxy**: 大语言模型 API 代理服务
- **知识库**: 存储案例摘要和洞察的数据库
- **摘要**: Agent 生成的案例结构化摘要（不可还原原文）
- **洞察**: 从案例中提取的可复用营销方法论

### 12.2 参考文档

- 需求文档: `requirement.md`
- 相关技术文档（由技术团队提供）

### 12.3 联系方式

- 产品负责人: [待填写]
- 技术负责人: [待填写]
- 设计负责人: [待填写]

---

**文档结束**

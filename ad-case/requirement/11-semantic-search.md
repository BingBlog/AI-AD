# 语义检索功能需求文档

## 1. 功能概述

### 1.1 背景

当前案例检索系统仅支持关键词检索，存在以下局限性：

- **检索精度不足**：关键词检索只能匹配字面意思，无法理解语义
- **同义词问题**：用户输入"情感营销"，无法匹配到"情感化营销"、"情感传播"等相似概念
- **自然语言理解弱**：用户无法使用自然语言描述需求，如"找一些关于春节营销的案例"
- **创意匹配困难**：无法根据创意概念或风格找到相似案例，如"寻找类似宜家时间就是金钱的创意案例"

### 1.2 目标

提供语义检索功能，让用户能够：

1. **自然语言查询**：使用自然语言描述检索需求，系统理解语义并返回相关案例
2. **语义相似度匹配**：根据案例的语义相似度找到相关案例，而不仅仅是关键词匹配
3. **提升检索体验**：支持同义词、近义词、相关概念的智能匹配
4. **创意灵感发现**：通过语义检索发现创意风格、主题相似的案例

### 1.3 用户价值

- **降低检索门槛**：用户无需精确输入关键词，可以用自然语言描述需求
- **提高检索召回率**：能够找到关键词检索遗漏的相关案例
- **发现创意关联**：通过语义相似度发现创意风格、主题相关的案例
- **提升检索效率**：减少因关键词不匹配导致的检索失败

## 2. 功能需求

### 2.1 语义检索

#### 2.1.1 自然语言查询

**功能描述**：

用户可以使用自然语言描述检索需求，系统理解语义并返回相关案例。

**使用场景**：

- 用户输入："找一些关于情感营销的案例"
- 用户输入："展示一些汽车行业的优秀广告"
- 用户输入："寻找类似宜家时间就是金钱的创意案例"
- 用户输入："找一些春节期间的营销活动"

**功能要求**：

- 支持中文自然语言查询
- 理解查询的语义意图，而非仅匹配关键词
- 返回语义相关的案例，即使不包含查询中的关键词
- 支持查询长度：建议支持 10-200 字的查询文本

#### 2.1.2 语义相似度匹配

**功能描述**：

根据案例的语义相似度找到相关案例，支持同义词、近义词、相关概念的匹配。

**使用场景**：

- 用户查询"情感营销"，能够匹配到包含"情感化营销"、"情感传播"、"情感共鸣"等概念的案例
- 用户查询"春节营销"，能够匹配到"新年营销"、"年货节"、"春节活动"等相关案例
- 用户查询"汽车广告"，能够匹配到"汽车营销"、"汽车品牌传播"等相关案例

**功能要求**：

- 支持同义词和近义词匹配
- 支持相关概念匹配（如上位词、下位词）
- 支持语义相似度评分，用户可以设置最小相似度阈值
- 相似度评分范围：0-1，0 表示完全不相关，1 表示完全相关

#### 2.1.3 检索结果排序

**功能描述**：

检索结果按照语义相似度从高到低排序，最相关的案例排在前面。

**功能要求**：

- 默认按语义相似度降序排序
- 支持结合其他排序条件（时间、评分、收藏数等）
- 在结果中显示每个案例的相似度分数（可选）

### 2.2 混合检索

#### 2.2.1 关键词 + 语义检索融合

**功能描述**：

结合关键词检索和语义检索的优势，提供更精准的检索结果。

**使用场景**：

- 用户输入"春节营销"，系统同时进行关键词匹配和语义匹配，融合两种结果
- 用户希望找到既包含特定关键词，又符合语义要求的案例

**功能要求**：

- 支持关键词检索和语义检索的加权融合
- 用户可以设置关键词检索和语义检索的权重比例
- 默认权重比例：关键词 40%，语义 60%（可配置）
- 融合后的结果按综合得分排序

#### 2.2.2 检索策略选择

**功能描述**：

用户可以选择不同的检索策略，适应不同的检索需求。

**检索策略**：

1. **纯关键词检索**：仅使用关键词匹配（现有功能）
2. **纯语义检索**：仅使用语义相似度匹配
3. **混合检索**：结合关键词和语义检索（默认）

**功能要求**：

- 用户可以在检索界面选择检索类型
- 默认使用混合检索
- 不同检索类型可以有不同的参数配置

### 2.3 筛选条件支持

#### 2.3.1 语义检索 + 多维度筛选

**功能描述**：

语义检索支持与现有的多维度筛选功能结合使用。

**支持的筛选条件**：

- 品牌名称
- 品牌行业
- 活动类型
- 活动地点
- 标签
- 时间范围
- 评分范围

**功能要求**：

- 语义检索结果可以应用所有现有的筛选条件
- 筛选条件在语义检索之后应用，用于进一步过滤结果
- 筛选条件不影响语义相似度计算

### 2.4 相似案例推荐

#### 2.4.1 基于语义的相似案例推荐

**功能描述**：

在案例详情页，基于语义相似度推荐相关案例。

**使用场景**：

- 用户查看某个案例详情时，系统推荐语义相似的案例
- 帮助用户发现创意风格、主题相关的案例

**功能要求**：

- 推荐数量：默认 10 个，最多 50 个
- 推荐案例应排除当前查看的案例
- 支持设置最小相似度阈值
- 推荐结果按相似度降序排列

## 3. 用户体验需求

### 3.1 检索界面

#### 3.1.1 检索输入框

**功能要求**：

- 提供语义检索输入框，支持自然语言输入
- 输入框提示："请输入自然语言描述，如'找一些关于情感营销的案例'"
- 支持输入长度限制和提示
- 支持清空按钮

#### 3.1.2 检索类型选择

**功能要求**：

- 提供检索类型选择器：关键词检索、语义检索、混合检索
- 默认选择混合检索
- 选择不同检索类型时，显示相应的参数配置选项

#### 3.1.3 参数配置

**功能要求**：

- 语义检索模式：显示"最小相似度"滑块（0.0-1.0，默认 0.5）
- 混合检索模式：显示"关键词权重"和"语义权重"滑块（总和为 100%）
- 参数配置可以折叠/展开，默认折叠
- 提供参数说明和示例

### 3.2 检索结果展示

#### 3.2.1 结果列表

**功能要求**：

- 显示检索结果总数
- 每个结果卡片显示案例基本信息
- 语义检索模式下，显示相似度分数（可选，可配置）
- 支持分页展示

#### 3.2.2 相似度分数展示

**功能要求**：

- 以百分比或小数形式显示相似度分数
- 使用颜色或图标直观表示相似度高低
- 用户可以配置是否显示相似度分数

#### 3.2.3 结果说明

**功能要求**：

- 在结果页顶部显示当前使用的检索类型
- 语义检索模式下，说明"基于语义相似度匹配"
- 混合检索模式下，说明"结合关键词和语义检索"

### 3.3 错误处理和提示

#### 3.3.1 输入验证

**功能要求**：

- 查询文本为空时，提示"请输入检索内容"
- 查询文本过长时，提示"查询文本过长，建议控制在 200 字以内"
- 查询文本过短时，提示"查询文本过短，建议输入更详细的描述"

#### 3.3.2 无结果提示

**功能要求**：

- 当语义检索无结果时，提示"未找到语义相关的案例，建议："
  - 尝试调整相似度阈值
  - 尝试使用关键词检索
  - 尝试使用混合检索
- 提供检索建议和示例

## 4. 性能需求

### 4.1 响应时间

**要求**：

- 语义检索响应时间：< 1 秒（95% 的请求）
- 混合检索响应时间：< 1.5 秒（95% 的请求）
- 相似案例推荐响应时间：< 0.5 秒（95% 的请求）

### 4.2 并发支持

**要求**：

- 支持至少 10 个并发语义检索请求
- 系统应能处理峰值流量，不因语义检索导致系统性能下降

### 4.3 数据规模

**要求**：

- 支持当前数据规模（数万案例）的语义检索
- 支持未来扩展到数十万案例的语义检索

## 5. 功能优先级

### P0 - 核心功能（必须实现）

1. **语义检索基础功能**：
   - 自然语言查询
   - 语义相似度匹配
   - 检索结果按相似度排序

2. **相似案例推荐**：
   - 基于语义的相似案例推荐
   - 在案例详情页展示

### P1 - 重要功能（应该实现）

3. **混合检索功能**：
   - 关键词 + 语义检索融合
   - 权重配置

4. **用户体验优化**：
   - 检索类型选择
   - 参数配置界面
   - 相似度分数展示

### P2 - 优化功能（可以后续实现）

5. **高级功能**：
   - 检索历史记录
   - 检索建议和自动补全
   - 检索结果解释（为什么这个案例相关）

## 6. 验收标准

### 6.1 功能验收

1. **语义检索功能**：
   - ✅ 用户输入自然语言查询，能够返回语义相关的案例
   - ✅ 返回的案例即使不包含查询中的关键词，也能被正确匹配
   - ✅ 检索结果按相似度从高到低排序

2. **相似案例推荐**：
   - ✅ 在案例详情页能够推荐语义相似的案例
   - ✅ 推荐的案例与当前案例在语义上相关

3. **混合检索功能**：
   - ✅ 用户可以选择检索类型（关键词、语义、混合）
   - ✅ 混合检索能够融合关键词和语义检索结果
   - ✅ 用户可以配置权重比例

### 6.2 性能验收

1. **响应时间**：
   - ✅ 语义检索响应时间 < 1 秒（95% 的请求）
   - ✅ 混合检索响应时间 < 1.5 秒（95% 的请求）

2. **准确性**：
   - ✅ 语义检索能够正确理解自然语言查询的语义
   - ✅ 相似案例推荐的相关性符合用户预期

### 6.3 用户体验验收

1. **界面友好**：
   - ✅ 检索界面清晰易懂
   - ✅ 参数配置直观
   - ✅ 结果展示信息完整

2. **错误处理**：
   - ✅ 输入验证提示清晰
   - ✅ 无结果时提供有用建议

## 7. 与其他功能的关系

### 7.1 与关键词检索的关系

- 语义检索是对关键词检索的补充和增强
- 两种检索方式可以独立使用，也可以混合使用
- 用户可以根据需求选择检索方式

### 7.2 与筛选功能的关系

- 语义检索可以与所有现有的筛选条件结合使用
- 筛选条件在语义检索之后应用，用于进一步过滤结果

### 7.3 与相似案例推荐的关系

- 语义检索是相似案例推荐的基础技术
- 相似案例推荐使用语义检索的语义相似度计算能力

## 8. 后续扩展方向

### 8.1 功能扩展

- **多语言支持**：支持英文等其他语言的语义检索
- **检索历史**：记录用户的语义检索历史，提供检索建议
- **个性化推荐**：基于用户检索历史提供个性化语义检索结果

### 8.2 体验优化

- **检索建议**：根据用户输入提供检索建议和自动补全
- **结果解释**：解释为什么某个案例与查询相关
- **检索优化**：基于用户反馈优化语义检索准确性

---

**文档版本**：v1.0  
**最后更新**：2024 年  
**维护者**：产品团队
